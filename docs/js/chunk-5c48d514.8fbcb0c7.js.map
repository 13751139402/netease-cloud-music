{"version":3,"sources":["webpack:///./src/components/comment.vue?55e5","webpack:///./src/views/music/children/commSong.vue?5453","webpack:///src/views/music/children/commSong.vue","webpack:///./src/views/music/children/commSong.vue?5214","webpack:///./src/views/music/children/commSong.vue","webpack:///./node_modules/vant/es/utils/validate/system.js","webpack:///./node_modules/vant/es/utils/dom/reset-scroll.js","webpack:///./node_modules/vant/es/field/index.js","webpack:///./src/components/comment.vue?1b30","webpack:///src/components/comment.vue","webpack:///./src/components/comment.vue?98f0","webpack:///./src/components/comment.vue","webpack:///./src/views/music/children/commSong.vue?3fac","webpack:///./node_modules/vant/es/field/style/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","back","commentData","_v","_s","name","artists","staticStyle","hotComments","slot","linkHotComm","_e","ref","musicComment","selectMusicComment","model","value","callback","$$v","commValue","expression","class","commFont","isCommFont","$event","submitComm","staticRenderFns","0","2","data","commPage","total","components","comments","computed","$store","state","methods","$parent","isError","$router","push","hotComment","$http","selectTotal","init","watch","loadType","Object","assign","$data","$options","mounted","component","isIOS","test","navigator","userAgent","toLowerCase","resetScroll","_createNamespace","create","createComponent","bem","inheritAttrs","props","error","Boolean","readonly","autosize","leftIcon","String","rightIcon","clearable","labelClass","labelWidth","Number","labelAlign","inputAlign","errorMessage","errorMessageAlign","type","default","focused","$nextTick","adjustSize","format","showClear","listeners","$listeners","input","onInput","keypress","onKeypress","focus","onFocus","blur","onBlur","click","labelStyle","width","$refs","target","_target","maxlength","$attrs","length","slice","event","composing","$emit","onClick","onClickLeftIcon","onClickRightIcon","onClear","keyCode","allowPoint","indexOf","isValidKey","style","height","scrollHeight","_this$autosize","maxHeight","minHeight","Math","min","max","renderInput","h","inputSlot","slots","inputProps","domProps","directives","renderLeftIcon","showLeftIcon","renderRightIcon","showRightIcon","_bem","arguments","scopedSlots","icon","title","size","label","center","border","isLink","required","clickable","arrowDirection","disabled","title1","_t","finished","onLoad","loading","_l","item","index","key","commentId","user","nickname","rawName","color","liked","like","likedCountMap","content","Array","total1","playData","data1","mixins"],"mappings":"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","file":"js/chunk-5c48d514.8fbcb0c7.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=style&index=0&id=90a6d392&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=style&index=0&id=90a6d392&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{attrs:{\"id\":\"scroll\"}},[_c('figure',{staticClass:\"title\",on:{\"click\":_vm.back}},[_c('img',{staticClass:\"titleImg\",attrs:{\"src\":((_vm.commentData.pic) + \"?param=80y80\")}}),_c('p',{staticClass:\"titileMain\"},[_c('span',[_vm._v(_vm._s(_vm.commentData.name))]),_c('router-link',{attrs:{\"to\":\"\"}},[_vm._v(_vm._s(_vm.artists))])],1),_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),(_vm.hotComments.length)?_c('comments',{attrs:{\"data\":_vm.hotComments,\"title\":\"精彩评论\"}},[_c('span',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"slot\":\"foot\"},slot:\"foot\"},[_c('div',{staticClass:\"hotComm\",on:{\"click\":_vm.linkHotComm}},[_c('span',[_vm._v(\"全部精彩评论\")]),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)])]):_vm._e(),_c('comments',{ref:\"musicComm\",staticStyle:{\"margin-bottom\":\"6.3vh\"},attrs:{\"data\":_vm.musicComment,\"title\":\"最新评论\"},on:{\"commLoad\":_vm.selectMusicComment}}),_c('footer',{staticClass:\"field\"},[_c('van-field',{attrs:{\"placeholder\":\"这一次也许就是你上热评了\"},model:{value:(_vm.commValue),callback:function ($$v) {_vm.commValue=$$v},expression:\"commValue\"}}),_c('van-icon',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"name\":\"close\"}}),_c('van-icon',{attrs:{\"name\":\"smile-o\"}}),_c('div',{staticClass:\"submit\",class:{commFont:_vm.isCommFont},on:{\"click\":function($event){return _vm.submitComm(1)}}},[_vm._v(\"发送\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Descripttion: learning\r\n * @version: learning\r\n * @Author: 戴训伟\r\n * @Date: 2019-09-09 13:53:07\r\n * @LastEditors: 戴训伟\r\n * @LastEditTime: 2019-09-09 13:53:07\r\n -->\r\n<template>\r\n  <main id=\"scroll\">\r\n    <figure class=\"title\" @click=\"back\">\r\n      <img :src=\"`${commentData.pic}?param=80y80`\" class=\"titleImg\" />\r\n      <p class=\"titileMain\">\r\n        <span>{{commentData.name}}</span>\r\n        <router-link to>{{artists}}</router-link>\r\n      </p>\r\n      <div style=\"display: flex;align-items: center;\">\r\n        <van-icon name=\"arrow\" />\r\n      </div>\r\n    </figure>\r\n    <comments :data=\"hotComments\" title=\"精彩评论\" v-if=\"hotComments.length\">\r\n      <span slot=\"foot\" style=\"display: inline-block;\">\r\n        <div class=\"hotComm\" @click=\"linkHotComm\">\r\n          <span>全部精彩评论</span>\r\n          <van-icon name=\"arrow\" />\r\n        </div>\r\n      </span>\r\n    </comments>\r\n    <comments :data=\"musicComment\" title=\"最新评论\" @commLoad=\"selectMusicComment\" ref=\"musicComm\" style=\"margin-bottom: 6.3vh;\"></comments>\r\n    <footer class=\"field\">\r\n      <van-field v-model=\"commValue\" placeholder=\"这一次也许就是你上热评了\" />\r\n      <van-icon name=\"close\" style=\"margin-right:5px\" />\r\n      <van-icon name=\"smile-o\" />\r\n      <div class=\"submit\" @click=\"submitComm(1)\" :class=\"{commFont:isCommFont}\">发送</div>\r\n    </footer>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport comments from \"../../../components/comment\";\r\nimport { Icon, Field, Toast } from \"vant\";\r\nlet typeMap = {\r\n  0: \"music\",\r\n  2: \"playlist\"\r\n};\r\nexport default {\r\n  data() {\r\n    return {\r\n      hotComments: [],\r\n      musicComment: [],\r\n      commPage: 0,\r\n      total: 0,\r\n      commValue: \"\"\r\n    };\r\n  },\r\n  components: {\r\n    comments,\r\n    [Icon.name]: Icon,\r\n    [Field.name]: Field\r\n  },\r\n  computed: {\r\n    commentData() {\r\n      return this.$store.state.commentData;\r\n    },\r\n    isCommFont() {\r\n      return this.commValue == \"\" ? false : true;\r\n    },\r\n    artists() {\r\n      if (this.commentData && this.commentData.artists) {\r\n        return this.commentData.artists\r\n          .reduce((tag, item) => {\r\n            tag.push(item.name);\r\n            return tag;\r\n          }, [])\r\n          .join(\"/\");\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    back() {\r\n      this.$parent.isError = false;\r\n      this.$router.push(\"/music\");\r\n    },\r\n    hotComment() {\r\n      return this.$http\r\n        .get(\r\n          `comment/hot?id=${this.commentData.id}&type=${this.commentData.type}&limit=15`\r\n        )\r\n        .then(response => {\r\n          this.hotComments = response.data.hotComments;\r\n        })\r\n        .catch(() => {\r\n          //this.$parent.isError = true;\r\n          //throw new Error(error);\r\n        });\r\n    },\r\n    selectMusicComment() {\r\n      return this.$http\r\n        .get(\r\n          `/comment/${typeMap[this.commentData.type]}?id=${\r\n            this.commentData.id\r\n          }&limit=15&offset=${this.commPage * 15}&before=0`\r\n        )\r\n        .then(response => {\r\n          this.musicComment.push(...response.data.comments);\r\n          this.commPage++;\r\n          this.$refs.musicComm.loading = false;\r\n          if (this.hotComments.length >= this.total) {\r\n            this.$refs.musicComm.finished = true;\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.$parent.isError = true;\r\n          throw new Error(error);\r\n        });\r\n    },\r\n    selectTotal() {\r\n      return this.$http\r\n        .get(\r\n          `/comment/${typeMap[this.commentData.type]}?id=${\r\n            this.commentData.id\r\n          }&limit=0&before=0`\r\n        )\r\n        .then(response => {\r\n          let total = response.data.total;\r\n          this.total = total;\r\n          this.$parent.title = `评论(${response.data.total})`;\r\n        })\r\n        .catch(error => {\r\n          throw new Error(error);\r\n        });\r\n    },\r\n    linkHotComm() {\r\n      this.$router.push(\"hot\");\r\n    },\r\n    init() {\r\n      const _this = this;\r\n      this.$http\r\n        .all([this.selectTotal(), this.hotComment(), this.selectMusicComment()])\r\n        .then(() => {\r\n          _this.$parent.loadType = false;\r\n        });\r\n    },\r\n    submitComm(isT) {\r\n      if (this.isCommFont) {\r\n        this.$http\r\n          .get(\r\n            `/comment?t=${isT}&type=${this.commentData.type}&id=${this.commentData.id}&content=${this.commValue}`\r\n          )\r\n          .then(response => {\r\n            this.musicComment.unshift(response.data.comment);\r\n            this.commValue = \"\";\r\n            Toast({\r\n              type:'success',\r\n              message:\"评论成功\",\r\n              duration:1000\r\n            });\r\n          })\r\n          .catch(error => {\r\n            Toast({\r\n              type:'faill',\r\n              message:\"评论失败\",\r\n              duration:1000\r\n            });\r\n            throw new Error(error);\r\n          });\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    commentData() {\r\n      this.$parent.loadType = true;\r\n      Object.assign(this.$data, this.$options.data());\r\n      this.init();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.titleImg {\r\n  display: flex;\r\n  height: 2.5rem;\r\n  border-radius: 5px;\r\n}\r\n.titileMain {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 0.1rem;\r\n  justify-content: center;\r\n  font-size: 0.5rem;\r\n}\r\n#scroll {\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  overflow-y: auto;\r\n}\r\n.titileMain span,\r\n.titileMain a {\r\n  padding: 3px;\r\n}\r\na {\r\n  color: #67809e;\r\n  font-size: 0.4rem;\r\n}\r\n.title {\r\n  display: flex;\r\n  padding: 5px 0.4rem 10px;\r\n  border-bottom: 8px solid #f6f6f6;\r\n}\r\n.hotComm {\r\n  line-height: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border: 1px solid #bbbbbb;\r\n  border-radius: 30px;\r\n  padding: 5px 10px;\r\n  font-size: 0.5px;\r\n  color: #6a6a6a;\r\n}\r\n.hotComm:hover {\r\n  background: #bbbbbb;\r\n  color: #fff !important;\r\n}\r\n.field {\r\n  bottom: 0;\r\n  height: 6.3vh;\r\n  width: 100%;\r\n  position: fixed;\r\n  display: flex;\r\n  align-items: center;\r\n  background: #fff;\r\n  font-size: 0.4rem;\r\n  z-index: 999;\r\n  border-top: 1px solid #f6f6f6;\r\n}\r\n.field > i {\r\n  font-size: 0.6rem;\r\n}\r\n.submit {\r\n  width: 2rem;\r\n  text-align: center;\r\n  color: #a3a3a3;\r\n}\r\n.commFont {\r\n  color: #3b3b3b;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commSong.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commSong.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./commSong.vue?vue&type=template&id=529b126e&scoped=true&\"\nimport script from \"./commSong.vue?vue&type=script&lang=js&\"\nexport * from \"./commSong.vue?vue&type=script&lang=js&\"\nimport style0 from \"./commSong.vue?vue&type=style&index=0&id=529b126e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"529b126e\",\n  null\n  \n)\n\nexport default component.exports","import { isServer } from '..';\nexport function isAndroid() {\n  /* istanbul ignore next */\n  return isServer ? false : /android/.test(navigator.userAgent.toLowerCase());\n}\nexport function isIOS() {\n  /* istanbul ignore next */\n  return isServer ? false : /ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());\n}","/**\n * Hack for iOS12 page scroll\n * https://developers.weixin.qq.com/community/develop/doc/00044ae90742f8c82fb78fcae56800\n */\nimport { isIOS as checkIsIOS } from '../validate/system';\nimport { getRootScrollTop, setRootScrollTop } from './scroll';\nvar isIOS = checkIsIOS();\n/* istanbul ignore next */\n\nexport function resetScroll() {\n  if (isIOS) {\n    setRootScrollTop(getRootScrollTop());\n  }\n}","import _mergeJSXProps2 from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport Icon from '../icon';\nimport Cell from '../cell';\nimport { cellProps } from '../cell/shared';\nimport { preventDefault } from '../utils/dom/event';\nimport { resetScroll } from '../utils/dom/reset-scroll';\nimport { createNamespace, isObj, isDef, addUnit } from '../utils';\n\nvar _createNamespace = createNamespace('field'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  inheritAttrs: false,\n  props: _extends({}, cellProps, {\n    error: Boolean,\n    readonly: Boolean,\n    autosize: [Boolean, Object],\n    leftIcon: String,\n    rightIcon: String,\n    clearable: Boolean,\n    labelClass: null,\n    labelWidth: [Number, String],\n    labelAlign: String,\n    inputAlign: String,\n    errorMessage: String,\n    errorMessageAlign: String,\n    type: {\n      type: String,\n      default: 'text'\n    }\n  }),\n  data: function data() {\n    return {\n      focused: false\n    };\n  },\n  watch: {\n    value: function value() {\n      this.$nextTick(this.adjustSize);\n    }\n  },\n  mounted: function mounted() {\n    this.format();\n    this.$nextTick(this.adjustSize);\n  },\n  computed: {\n    showClear: function showClear() {\n      return this.clearable && this.focused && this.value !== '' && isDef(this.value) && !this.readonly;\n    },\n    listeners: function listeners() {\n      var listeners = _extends({}, this.$listeners, {\n        input: this.onInput,\n        keypress: this.onKeypress,\n        focus: this.onFocus,\n        blur: this.onBlur\n      });\n\n      delete listeners.click;\n      return listeners;\n    },\n    labelStyle: function labelStyle() {\n      var labelWidth = this.labelWidth;\n\n      if (labelWidth) {\n        return {\n          width: addUnit(labelWidth)\n        };\n      }\n    }\n  },\n  methods: {\n    focus: function focus() {\n      if (this.$refs.input) {\n        this.$refs.input.focus();\n      }\n    },\n    blur: function blur() {\n      if (this.$refs.input) {\n        this.$refs.input.blur();\n      }\n    },\n    // native maxlength not work when type = number\n    format: function format(target) {\n      if (target === void 0) {\n        target = this.$refs.input;\n      }\n\n      if (!target) {\n        return;\n      }\n\n      var _target = target,\n          value = _target.value;\n      var maxlength = this.$attrs.maxlength;\n\n      if (this.type === 'number' && isDef(maxlength) && value.length > maxlength) {\n        value = value.slice(0, maxlength);\n        target.value = value;\n      }\n\n      return value;\n    },\n    onInput: function onInput(event) {\n      // not update v-model when composing\n      if (event.target.composing) {\n        return;\n      }\n\n      this.$emit('input', this.format(event.target));\n    },\n    onFocus: function onFocus(event) {\n      this.focused = true;\n      this.$emit('focus', event); // hack for safari\n\n      /* istanbul ignore if */\n\n      if (this.readonly) {\n        this.blur();\n      }\n    },\n    onBlur: function onBlur(event) {\n      this.focused = false;\n      this.$emit('blur', event);\n      resetScroll();\n    },\n    onClick: function onClick(event) {\n      this.$emit('click', event);\n    },\n    onClickLeftIcon: function onClickLeftIcon(event) {\n      this.$emit('click-left-icon', event);\n    },\n    onClickRightIcon: function onClickRightIcon(event) {\n      this.$emit('click-right-icon', event);\n    },\n    onClear: function onClear(event) {\n      preventDefault(event);\n      this.$emit('input', '');\n      this.$emit('clear', event);\n    },\n    onKeypress: function onKeypress(event) {\n      if (this.type === 'number') {\n        var keyCode = event.keyCode;\n        var allowPoint = String(this.value).indexOf('.') === -1;\n        var isValidKey = keyCode >= 48 && keyCode <= 57 || keyCode === 46 && allowPoint || keyCode === 45;\n\n        if (!isValidKey) {\n          preventDefault(event);\n        }\n      } // trigger blur after click keyboard search button\n\n      /* istanbul ignore next */\n\n\n      if (this.type === 'search' && event.keyCode === 13) {\n        this.blur();\n      }\n\n      this.$emit('keypress', event);\n    },\n    adjustSize: function adjustSize() {\n      var input = this.$refs.input;\n\n      if (!(this.type === 'textarea' && this.autosize) || !input) {\n        return;\n      }\n\n      input.style.height = 'auto';\n      var height = input.scrollHeight;\n\n      if (isObj(this.autosize)) {\n        var _this$autosize = this.autosize,\n            maxHeight = _this$autosize.maxHeight,\n            minHeight = _this$autosize.minHeight;\n\n        if (maxHeight) {\n          height = Math.min(height, maxHeight);\n        }\n\n        if (minHeight) {\n          height = Math.max(height, minHeight);\n        }\n      }\n\n      if (height) {\n        input.style.height = height + 'px';\n      }\n    },\n    renderInput: function renderInput() {\n      var h = this.$createElement;\n      var inputSlot = this.slots('input');\n\n      if (inputSlot) {\n        return h(\"div\", {\n          \"class\": bem('control', this.inputAlign)\n        }, [inputSlot]);\n      }\n\n      var inputProps = {\n        ref: 'input',\n        class: bem('control', this.inputAlign),\n        domProps: {\n          value: this.value\n        },\n        attrs: _extends({}, this.$attrs, {\n          readonly: this.readonly\n        }),\n        on: this.listeners,\n        // add model directive to skip IME composition\n        directives: [{\n          name: 'model',\n          value: this.value\n        }]\n      };\n\n      if (this.type === 'textarea') {\n        return h(\"textarea\", _mergeJSXProps([{}, inputProps]));\n      }\n\n      return h(\"input\", _mergeJSXProps2([{\n        \"attrs\": {\n          \"type\": this.type\n        }\n      }, inputProps]));\n    },\n    renderLeftIcon: function renderLeftIcon() {\n      var h = this.$createElement;\n      var showLeftIcon = this.slots('left-icon') || this.leftIcon;\n\n      if (showLeftIcon) {\n        return h(\"div\", {\n          \"class\": bem('left-icon'),\n          \"on\": {\n            \"click\": this.onClickLeftIcon\n          }\n        }, [this.slots('left-icon') || h(Icon, {\n          \"attrs\": {\n            \"name\": this.leftIcon\n          }\n        })]);\n      }\n    },\n    renderRightIcon: function renderRightIcon() {\n      var h = this.$createElement;\n      var slots = this.slots;\n      var showRightIcon = slots('right-icon') || this.rightIcon;\n\n      if (showRightIcon) {\n        return h(\"div\", {\n          \"class\": bem('right-icon'),\n          \"on\": {\n            \"click\": this.onClickRightIcon\n          }\n        }, [slots('right-icon') || h(Icon, {\n          \"attrs\": {\n            \"name\": this.rightIcon\n          }\n        })]);\n      }\n    }\n  },\n  render: function render() {\n    var _bem;\n\n    var h = arguments[0];\n    var slots = this.slots,\n        labelAlign = this.labelAlign;\n    var scopedSlots = {\n      icon: this.renderLeftIcon\n    };\n\n    if (slots('label')) {\n      scopedSlots.title = function () {\n        return slots('label');\n      };\n    }\n\n    return h(Cell, {\n      \"attrs\": {\n        \"icon\": this.leftIcon,\n        \"size\": this.size,\n        \"title\": this.label,\n        \"center\": this.center,\n        \"border\": this.border,\n        \"isLink\": this.isLink,\n        \"required\": this.required,\n        \"clickable\": this.clickable,\n        \"titleStyle\": this.labelStyle,\n        \"titleClass\": [bem('label', labelAlign), this.labelClass],\n        \"arrowDirection\": this.arrowDirection\n      },\n      \"class\": bem((_bem = {\n        error: this.error,\n        disabled: this.$attrs.disabled\n      }, _bem[\"label-\" + labelAlign] = labelAlign, _bem['min-height'] = this.type === 'textarea' && !this.autosize, _bem)),\n      \"scopedSlots\": scopedSlots,\n      \"on\": {\n        \"click\": this.onClick\n      }\n    }, [h(\"div\", {\n      \"class\": bem('body')\n    }, [this.renderInput(), this.showClear && h(Icon, {\n      \"attrs\": {\n        \"name\": \"clear\"\n      },\n      \"class\": bem('clear'),\n      \"on\": {\n        \"touchstart\": this.onClear\n      }\n    }), this.renderRightIcon(), slots('button') && h(\"div\", {\n      \"class\": bem('button')\n    }, [slots('button')])]), this.errorMessage && h(\"div\", {\n      \"class\": bem('error-message', this.errorMessageAlign)\n    }, [this.errorMessage])]);\n  }\n});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"appear\":\"\",\"name\":\"van-fade\"}},[_c('section',[_c('head',{class:{height:_vm.title1}},[_vm._t(\"title\",[_c('span',[_vm._v(_vm._s(_vm.title1))])])],2),_c('main',[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"immediate-check\":false,\"error\":_vm.error,\"error-text\":\"请求失败，点击重新加载\"},on:{\"load\":_vm.onLoad,\"update:error\":function($event){_vm.error=$event}},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[_vm._l((_vm.data1),function(item,index){return _c('figure',{key:item.commentId,staticClass:\"commItem\"},[_c('head',{staticClass:\"commImgContainer\"},[_c('img',{staticClass:\"commImg\",attrs:{\"src\":((item.user.avatarUrl) + \"?param=50y50\")}})]),_c('main',{staticClass:\"commMain\"},[_c('div',{staticClass:\"commHead\"},[_c('figcaption',{staticClass:\"commTitle\"},[_c('span',{staticClass:\"commName\"},[_vm._v(_vm._s(item.user.nickname))]),_c('span',{directives:[{name:\"time\",rawName:\"v-time\",value:(item.time),expression:\"item.time\"}],staticClass:\"commTime\"})]),_c('div',{staticClass:\"commLike\",class:{color:item.liked},on:{\"click\":function($event){return _vm.like(index)}}},[(item.likedCountMap)?_c('span',{staticClass:\"commLikeNum\"},[_vm._v(_vm._s(item.likedCountMap))]):_vm._e(),(item.liked)?_c('van-icon',{attrs:{\"name\":\"good-job\"}}):_c('van-icon',{attrs:{\"name\":\"good-job-o\"}})],1)]),_c('div',{staticClass:\"text\",domProps:{\"innerHTML\":_vm._s(item.content)}})])])}),_vm._t(\"foot\",null,{\"slot\":\"loading\"})],2)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Descripttion: learning\r\n * @version: learning\r\n * @Author: 戴训伟\r\n * @Date: 2019-09-06 13:36:10\r\n * @LastEditors: 戴训伟\r\n * @LastEditTime: 2019-09-06 13:36:10\r\n -->\r\n<template>\r\n<transition appear name=\"van-fade\">\r\n  <section>\r\n    <head :class=\"{height:title1}\">\r\n      <slot name=\"title\">\r\n        <span>{{title1}}</span>\r\n      </slot>\r\n    </head>\r\n    <main>\r\n      <van-list\r\n        v-model=\"loading\"\r\n        :finished=\"finished\"\r\n        @load=\"onLoad\"\r\n        finished-text=\"没有更多了\"\r\n        :immediate-check=\"false\"\r\n        :error.sync=\"error\"\r\n        error-text=\"请求失败，点击重新加载\"\r\n      >\r\n        <figure class=\"commItem\" v-for=\"(item,index) in data1\" :key=\"item.commentId\">\r\n          <head class=\"commImgContainer\">\r\n            <img :src=\"`${item.user.avatarUrl}?param=50y50`\" class=\"commImg\" />\r\n          </head>\r\n          <main class=\"commMain\">\r\n            <div class=\"commHead\">\r\n              <figcaption class=\"commTitle\">\r\n                <span class=\"commName\">{{item.user.nickname}}</span>\r\n                <span class=\"commTime\" v-time=\"item.time\"></span>\r\n              </figcaption>\r\n              <div class=\"commLike\" @click=\"like(index)\" :class=\"{color:item.liked}\">\r\n                <span class=\"commLikeNum\" v-if=\"item.likedCountMap\">{{item.likedCountMap}}</span>\r\n                <van-icon name=\"good-job\" v-if=\"item.liked\" />\r\n                <van-icon name=\"good-job-o\" v-else />\r\n              </div>\r\n            </div>\r\n            <div class=\"text\" v-html=\"item.content\"></div>\r\n          </main>\r\n        </figure>\r\n        <slot name=\"foot\" slot=\"loading\"></slot>\r\n      </van-list>\r\n    </main>\r\n  </section>\r\n</transition>\r\n</template>\r\n\r\n<script>\r\nimport { Icon, List } from \"vant\";\r\nimport mixins from \"../assets/mixins\";\r\nexport default {\r\n  //   0: 歌曲 1: mv 2: 歌单 3: 专辑 4: 电台 5: 视频 6: 动态\r\n  props: {\r\n    data: Array,\r\n    title: String,\r\n    total: { type: Number, default: 0 }\r\n  },\r\n  components: {\r\n    [Icon.name]: Icon,\r\n    [List.name]: List\r\n  },\r\n  data() {\r\n    return {\r\n      title1: this.title,\r\n      loading: false, //是否正在加载\r\n      finished: false, //是否加载完成\r\n      error: false,\r\n      total1: this.total // 总数\r\n    };\r\n  },\r\n  computed: {\r\n    playData() {\r\n      return this.$store.state.playData;\r\n    },\r\n    data1() {\r\n      this.data &&\r\n        this.data.forEach(item => {\r\n          let count = item.likedCount;\r\n          if (count > 100000) {\r\n            let num = Math.floor(count / 10000);\r\n            let fixed = String(count % 10000).slice(0, 1);\r\n            item.likedCountMap =\r\n              fixed === \"0\" ? `${num}万` : `${num}.${fixed}万`;\r\n          } else {\r\n            item.likedCountMap = count;\r\n          }\r\n          item.content = item.content.split(\"\\n\").join(\"<br />\");\r\n        });\r\n      return this.data;\r\n    }\r\n  },\r\n  mixins: [mixins],\r\n  methods: {\r\n    onLoad() {\r\n      this.error = false;\r\n      this.$emit(\"commLoad\");\r\n    },\r\n    like(index) {\r\n      let item = this.data[index];\r\n      let { commentId, liked } = item;\r\n      let { id, type } = this.playData;\r\n      this.$http\r\n        .get(\r\n          `/comment/like?id=${id}&cid=${commentId}&t=${\r\n            liked ? 0 : 1\r\n          }&type=${type}`\r\n        )\r\n        .then(() => {\r\n          item.liked = !liked;\r\n          this.likedCountMap = item.liked\r\n            ? item.likedCount++\r\n            : item.likedCount--;\r\n        })\r\n        .catch(error => {\r\n          throw new Error(error);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nsection {\r\n  padding: 0 0.4rem;\r\n}\r\nhead {\r\n  font-size: 0.5rem;\r\n  font-weight: bold;\r\n  align-items: center;\r\n  display: flex;\r\n  padding-right: 0.3rem;\r\n  z-index: 99;\r\n}\r\n.color {\r\n  color: rgb(255, 68, 68);\r\n}\r\n.height {\r\n  height: 1.2rem;\r\n}\r\nfigure > head {\r\n  height: 1.2rem;\r\n}\r\n.commImgContainer {\r\n  width: 1.2rem;\r\n}\r\n.commItem {\r\n  display: flex;\r\n  padding: 0.1rem 0;\r\n  margin: 0;\r\n}\r\n.commImg {\r\n  height: 0.9rem;\r\n  border-radius: 50%;\r\n}\r\n.commTitle {\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n}\r\n.commName {\r\n  font-size: 0.35rem;\r\n  color: #717171;\r\n  padding-bottom: 0.1rem;\r\n}\r\n.commTime {\r\n  font-size: 0.3rem;\r\n  color: #b3b3b3;\r\n}\r\n.commHead {\r\n  display: flex;\r\n  height: 1.3rem;\r\n  color: #a3a3a3;\r\n  justify-content: space-between;\r\n  margin-bottom: 0.1rem;\r\n}\r\n.commLike {\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 0.35rem;\r\n}\r\n.text {\r\n  color: #3b3b3b;\r\n  font-size: 0.4rem;\r\n  line-height: 0.65rem;\r\n}\r\n.commLikeNum {\r\n  margin-right: 0.1rem;\r\n}\r\n.commMain {\r\n  padding-bottom: 0.2rem;\r\n  border-bottom: 1px solid #e8e8e8;\r\n  width: 100%;\r\n}\r\n.footer {\r\n  height: 1.2rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment.vue?vue&type=template&id=90a6d392&scoped=true&\"\nimport script from \"./comment.vue?vue&type=script&lang=js&\"\nexport * from \"./comment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment.vue?vue&type=style&index=0&id=90a6d392&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"90a6d392\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commSong.vue?vue&type=style&index=0&id=529b126e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commSong.vue?vue&type=style&index=0&id=529b126e&scoped=true&lang=css&\"","import '../../style/base.css';\nimport '../../image/index.css';\nimport '../index.css';"],"sourceRoot":""}